---
import type { MacroIndicator } from "../../data/types";

interface Props {
  indicator: MacroIndicator;
  class?: string;
}

const { indicator, class: className = "" } = Astro.props;

const trendIcons = {
  up: "↑",
  down: "↓",
  flat: "→",
};

const trendColors = {
  up: "text-success",
  down: "text-danger",
  flat: "text-text-secondary",
};

const trend = indicator.trend ?? "flat";
---

<div
  class:list={[
    "bg-bg-surface border border-border rounded-lg p-4",
    className,
  ]}
>
  <p class="text-xs font-medium text-text-secondary uppercase tracking-wide mb-1">
    {indicator.name}
  </p>

  <div class="flex items-baseline gap-2">
    <span class="text-2xl font-bold text-text-primary">
      {indicator.value.toFixed(indicator.unit === "%" ? 1 : 2)}
    </span>
    <span class="text-sm text-text-secondary">{indicator.unit}</span>
    {
      indicator.previous_value !== undefined && (
        <span class:list={["text-sm font-medium", trendColors[trend]]}>
          {trendIcons[trend]}
        </span>
      )
    }
  </div>

  {
    indicator.previous_value !== undefined && (
      <p class="text-xs text-text-secondary mt-1">
        Previous: {indicator.previous_value.toFixed(indicator.unit === "%" ? 1 : 2)}
        {indicator.unit}
      </p>
    )
  }
</div>
